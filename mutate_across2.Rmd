# across
Oliver Cutbill 7 July 2023

If you use `dplyr` to work with `data.frame`s then you will likely encounter
situations where `across`, a relatively recent addition to `dplyr` (June 2020),
will simplify your code.

```{r, echo = FALSE}
suppressPackageStartupMessages({
  library(tidyverse)
}
)
```

```{r, eval = FALSE}
library(tidyverse)
```

```{r outputs, echo = FALSE}
example_1 <- structure(list(mpg = 20.090625, cyl = 6.1875, disp = 230.721875, 
    hp = 146.6875, drat = 3.5965625, wt = 3.21725, qsec = 17.84875, 
    vs = 0.4375, am = 0.40625, gear = 3.6875, carb = 2.8125), class = c("tbl_df", 
"tbl", "data.frame"), row.names = c(NA, -1L))

example_2 <- structure(list(mpg = c(0.150884824647657, 0.150884824647657, 
0.449543446630647, 0.217253407310543, -0.230734525663942, -0.330287399658272, 
-0.960788934955696, 0.715017777282194, 0.449543446630647, -0.147773797335334, 
-0.380063836655437, -0.612353875975541, -0.463024564984046, -0.811459623964201, 
-1.60788261591884, -1.60788261591884, -0.89442035229281, 2.04238943053993, 
1.7105465172255, 2.29127161552575, 0.233845552976265, -0.761683186967036, 
-0.811459623964201, -1.12671039161291, -0.147773797335334, 1.19619000158812, 
0.980492107933741, 1.7105465172255, -0.711906749969871, -0.0648130690067253, 
-0.844643915295645, 0.217253407310543), cyl = c(-0.104987808575239, 
-0.104987808575239, -1.22485776671113, -0.104987808575239, 1.01488214956065, 
-0.104987808575239, 1.01488214956065, -1.22485776671113, -1.22485776671113, 
-0.104987808575239, -0.104987808575239, 1.01488214956065, 1.01488214956065, 
1.01488214956065, 1.01488214956065, 1.01488214956065, 1.01488214956065, 
-1.22485776671113, -1.22485776671113, -1.22485776671113, -1.22485776671113, 
1.01488214956065, 1.01488214956065, 1.01488214956065, 1.01488214956065, 
-1.22485776671113, -1.22485776671113, -1.22485776671113, 1.01488214956065, 
-0.104987808575239, 1.01488214956065, -1.22485776671113), disp = c(-0.570619818667904, 
-0.570619818667904, -0.990182090888924, 0.22009369436402, 1.04308122833602, 
-0.046166978391628, 1.04308122833602, -0.677930938293665, -0.725535119180281, 
-0.509299178881755, -0.509299178881755, 0.363713087547369, 0.363713087547369, 
0.363713087547369, 1.94675381465822, 1.84993175183798, 1.68856164713759, 
-1.226589294275, -1.25079480998006, -1.28790993406115, -0.892553177545187, 
0.704204008465197, 0.591244935174923, 0.962396175985825, 1.36582143773681, 
-1.22416874270449, -0.890939476498183, -1.09426580842068, 0.970464681220845, 
-0.691647397193198, 0.567039419469864, -0.885291522833669), hp = c(-0.535092839730217, 
-0.535092839730217, -0.783040458821562, -0.535092839730217, 0.41294217444257, 
-0.608018610051201, 1.43390295893634, -1.23518023481166, -0.753870150693168, 
-0.34548583689566, -0.34548583689566, 0.485867944763553, 0.485867944763553, 
0.485867944763553, 0.850496796368472, 0.996348337010439, 1.21512564797339, 
-1.17683961855487, -1.38103177545363, -1.19142477261907, -0.724699842564775, 
0.0483133228376517, 0.0483133228376517, 1.43390295893634, 0.41294217444257, 
-1.17683961855487, -0.812210766949955, -0.491337377537627, 1.71102088615608, 
0.41294217444257, 2.74656682471405, -0.549677993794414), drat = c(0.567513685376339, 
0.567513685376339, 0.473999586859126, -0.966117530305962, -0.835197792381863, 
-1.56460776081613, -0.722980874161207, 0.174754471604042, 0.604919324783224, 
0.604919324783224, 0.604919324783224, -0.984820350009405, -0.984820350009405, 
-0.984820350009405, -1.2466598258576, -1.1157400879335, -0.685575234754321, 
0.904164440038308, 2.49390411483094, 1.1660039158865, 0.193457291307485, 
-1.56460776081613, -0.835197792381863, 0.249565750417813, -0.966117530305962, 
0.904164440038308, 1.5587631296588, 0.324377029231584, 1.1660039158865, 
0.0438347336799438, -0.105787823947598, 0.960272899148636), wt = c(-0.610399567481535, 
-0.349785269100972, -0.917004624399846, -0.00229953792688741, 
0.227654254761845, 0.248094591889733, 0.360516446093113, -0.0278499593367465, 
-0.0687306335925212, 0.227654254761845, 0.227654254761845, 0.871524874290296, 
0.524039143116211, 0.57513998593593, 2.07750476483565, 2.25533569784827, 
2.17459636619311, -1.03964664716717, -1.63752650815787, -1.41268279975111, 
-0.768812180222662, 0.309415603273395, 0.222544170479873, 0.636460997319592, 
0.641571081601564, -1.31048111411168, -1.10096765855083, -1.7417722275101, 
-0.0482902964646338, -0.45709703902238, 0.360516446093113, -0.446876870458437
), qsec = c(-0.777165145454422, -0.463780820374691, 0.42600681690526, 
0.89048715586272, -0.463780820374691, 1.32698675150949, -1.12412636250698, 
1.20387148094245, 2.82675459296249, 0.252526208378981, 0.588295128107263, 
-0.251127171213446, -0.139204197970683, 0.0846417485148387, 0.0734494511905628, 
-0.0160889274036462, -0.239934873889168, 0.907275601849133, 0.375641478946017, 
1.14790999432107, 1.20946762960459, -0.547723050306761, -0.307088657834825, 
-1.36476075497892, -0.446992374388276, 0.588295128107263, -0.642857577563109, 
-0.530934604320349, -1.87401028323348, -1.31439541701968, -1.8180487966121, 
0.420410668243123), vs = c(-0.868027777333319, -0.868027777333319, 
1.11603571371427, 1.11603571371427, -0.868027777333319, 1.11603571371427, 
-0.868027777333319, 1.11603571371427, 1.11603571371427, 1.11603571371427, 
1.11603571371427, -0.868027777333319, -0.868027777333319, -0.868027777333319, 
-0.868027777333319, -0.868027777333319, -0.868027777333319, 1.11603571371427, 
1.11603571371427, 1.11603571371427, 1.11603571371427, -0.868027777333319, 
-0.868027777333319, -0.868027777333319, -0.868027777333319, 1.11603571371427, 
-0.868027777333319, 1.11603571371427, -0.868027777333319, -0.868027777333319, 
-0.868027777333319, 1.11603571371427), am = c(1.18990141802394, 
1.18990141802394, 1.18990141802394, -0.814143075490065, -0.814143075490065, 
-0.814143075490065, -0.814143075490065, -0.814143075490065, -0.814143075490065, 
-0.814143075490065, -0.814143075490065, -0.814143075490065, -0.814143075490065, 
-0.814143075490065, -0.814143075490065, -0.814143075490065, -0.814143075490065, 
1.18990141802394, 1.18990141802394, 1.18990141802394, -0.814143075490065, 
-0.814143075490065, -0.814143075490065, -0.814143075490065, -0.814143075490065, 
1.18990141802394, 1.18990141802394, 1.18990141802394, 1.18990141802394, 
1.18990141802394, 1.18990141802394, 1.18990141802394), gear = c(0.42355418561047, 
0.42355418561047, 0.42355418561047, -0.931819208343033, -0.931819208343033, 
-0.931819208343033, -0.931819208343033, 0.42355418561047, 0.42355418561047, 
0.42355418561047, 0.42355418561047, -0.931819208343033, -0.931819208343033, 
-0.931819208343033, -0.931819208343033, -0.931819208343033, -0.931819208343033, 
0.42355418561047, 0.42355418561047, 0.42355418561047, -0.931819208343033, 
-0.931819208343033, -0.931819208343033, -0.931819208343033, -0.931819208343033, 
0.42355418561047, 1.77892757956397, 1.77892757956397, 1.77892757956397, 
1.77892757956397, 1.77892757956397, 0.42355418561047), carb = c(0.735203081008625, 
0.735203081008625, -1.12215207101316, -1.12215207101316, -0.503033687005901, 
-1.12215207101316, 0.735203081008625, -0.503033687005901, -0.503033687005901, 
0.735203081008625, 0.735203081008625, 0.116084697001362, 0.116084697001362, 
0.116084697001362, 0.735203081008625, 0.735203081008625, 0.735203081008625, 
-1.12215207101316, -0.503033687005901, -1.12215207101316, -1.12215207101316, 
-0.503033687005901, -0.503033687005901, 0.735203081008625, -0.503033687005901, 
-1.12215207101316, -0.503033687005901, -0.503033687005901, 0.735203081008625, 
1.97343984902315, 3.21167661703768, -0.503033687005901)), row.names = c(NA, 
-32L), class = c("tbl_df", "tbl", "data.frame"))

example_3 <- structure(list(mpg = c(0.150884824647657, 0.150884824647657, 
0.449543446630647, 0.217253407310543, -0.230734525663942, -0.330287399658272, 
-0.960788934955696, 0.715017777282194, 0.449543446630647, -0.147773797335334, 
-0.380063836655437, -0.612353875975541, -0.463024564984046, -0.811459623964201, 
-1.60788261591884, -1.60788261591884, -0.89442035229281, 2.04238943053993, 
1.7105465172255, 2.29127161552575, 0.233845552976265, -0.761683186967036, 
-0.811459623964201, -1.12671039161291, -0.147773797335334, 1.19619000158812, 
0.980492107933741, 1.7105465172255, -0.711906749969871, -0.0648130690067253, 
-0.844643915295645, 0.217253407310543), cyl = c(-0.104987808575239, 
-0.104987808575239, -1.22485776671113, -0.104987808575239, 1.01488214956065, 
-0.104987808575239, 1.01488214956065, -1.22485776671113, -1.22485776671113, 
-0.104987808575239, -0.104987808575239, 1.01488214956065, 1.01488214956065, 
1.01488214956065, 1.01488214956065, 1.01488214956065, 1.01488214956065, 
-1.22485776671113, -1.22485776671113, -1.22485776671113, -1.22485776671113, 
1.01488214956065, 1.01488214956065, 1.01488214956065, 1.01488214956065, 
-1.22485776671113, -1.22485776671113, -1.22485776671113, 1.01488214956065, 
-0.104987808575239, 1.01488214956065, -1.22485776671113), disp = c(160, 
160, 108, 258, 360, 225, 360, 146.7, 140.8, 167.6, 167.6, 275.8, 
275.8, 275.8, 472, 460, 440, 78.7, 75.7, 71.1, 120.1, 318, 304, 
350, 400, 79, 120.3, 95.1, 351, 145, 301, 121), hp = c(-0.535092839730217, 
-0.535092839730217, -0.783040458821562, -0.535092839730217, 0.41294217444257, 
-0.608018610051201, 1.43390295893634, -1.23518023481166, -0.753870150693168, 
-0.34548583689566, -0.34548583689566, 0.485867944763553, 0.485867944763553, 
0.485867944763553, 0.850496796368472, 0.996348337010439, 1.21512564797339, 
-1.17683961855487, -1.38103177545363, -1.19142477261907, -0.724699842564775, 
0.0483133228376517, 0.0483133228376517, 1.43390295893634, 0.41294217444257, 
-1.17683961855487, -0.812210766949955, -0.491337377537627, 1.71102088615608, 
0.41294217444257, 2.74656682471405, -0.549677993794414), drat = c(3.9, 
3.9, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 3.07, 
3.07, 3.07, 2.93, 3, 3.23, 4.08, 4.93, 4.22, 3.7, 2.76, 3.15, 
3.73, 3.08, 4.08, 4.43, 3.77, 4.22, 3.62, 3.54, 4.11), wt = c(2.62, 
2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 3.15, 3.44, 3.44, 
4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 1.615, 1.835, 2.465, 
3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 1.513, 3.17, 2.77, 3.57, 
2.78), qsec = c(16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 
20, 22.9, 18.3, 18.9, 17.4, 17.6, 18, 17.98, 17.82, 17.42, 19.47, 
18.52, 19.9, 20.01, 16.87, 17.3, 15.41, 17.05, 18.9, 16.7, 16.9, 
14.5, 15.5, 14.6, 18.6), vs = c(0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 
1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 
1), am = c(1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1), gear = c(4, 4, 
4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 
3, 3, 4, 5, 5, 5, 5, 5, 4), carb = c(4, 4, 1, 1, 2, 1, 4, 2, 
2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4, 
6, 8, 2)), row.names = c(NA, -32L), class = c("tbl_df", "tbl", 
"data.frame"))

example_4 <- structure(list(mpg = c(21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 
24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 
30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 
19.7, 15, 21.4), cyl = c(27, 27, 26.8, 27.4, 26.7, 24.1, 22.3, 
28.4, 26.8, 25.2, 23.8, 24.4, 25.3, 23.2, 18.4, 18.4, 22.7, 36.4, 
34.4, 37.9, 25.5, 23.5, 23.2, 21.3, 27.2, 31.3, 30, 34.4, 23.8, 
25.7, 23, 25.4), disp = c(181, 181, 130.8, 279.4, 378.7, 243.1, 
374.3, 171.1, 163.6, 186.8, 185.4, 292.2, 293.1, 291, 482.4, 
470.4, 454.7, 111.1, 106.1, 105, 141.6, 333.5, 319.2, 363.3, 
419.2, 106.3, 146.3, 125.5, 366.8, 164.7, 316, 142.4), hp = c(131, 
131, 115.8, 131.4, 193.7, 123.1, 259.3, 86.4, 117.8, 142.2, 140.8, 
196.4, 197.3, 195.2, 215.4, 225.4, 244.7, 98.4, 82.4, 98.9, 118.5, 
165.5, 165.2, 258.3, 194.2, 93.3, 117, 143.4, 279.8, 194.7, 350, 
130.4), drat = c(24.9, 24.9, 26.65, 24.48, 21.85, 20.86, 17.51, 
28.09, 26.72, 23.12, 21.72, 19.47, 20.37, 18.27, 13.33, 13.4, 
17.93, 36.48, 35.33, 38.12, 25.2, 18.26, 18.35, 17.03, 22.28, 
31.38, 30.43, 34.17, 20.02, 23.32, 18.54, 25.51), wt = c(23.62, 
23.875, 25.12, 24.615, 22.14, 21.56, 17.87, 27.59, 25.95, 22.64, 
21.24, 20.47, 21.03, 18.98, 15.65, 15.824, 20.045, 34.6, 32.015, 
35.735, 23.965, 19.02, 18.635, 17.14, 23.045, 29.235, 28.14, 
31.913, 18.97, 22.47, 18.57, 24.18), qsec = c(37.46, 38.02, 41.41, 
40.84, 35.72, 38.32, 30.14, 44.4, 45.7, 37.5, 36.7, 33.8, 34.9, 
33.2, 28.38, 28.22, 32.12, 51.87, 48.92, 53.8, 41.51, 32.37, 
32.5, 28.71, 36.25, 46.2, 42.7, 47.3, 30.3, 35.2, 29.6, 40), 
    vs = c(21, 21, 23.8, 22.4, 18.7, 19.1, 14.3, 25.4, 23.8, 
    20.2, 18.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 33.4, 31.4, 
    34.9, 22.5, 15.5, 15.2, 13.3, 19.2, 28.3, 26, 31.4, 15.8, 
    19.7, 15, 22.4), am = c(22, 22, 23.8, 21.4, 18.7, 18.1, 14.3, 
    24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 
    33.4, 31.4, 34.9, 21.5, 15.5, 15.2, 13.3, 19.2, 28.3, 27, 
    31.4, 16.8, 20.7, 16, 22.4), gear = c(25, 25, 26.8, 24.4, 
    21.7, 21.1, 17.3, 28.4, 26.8, 23.2, 21.8, 19.4, 20.3, 18.2, 
    13.4, 13.4, 17.7, 36.4, 34.4, 37.9, 24.5, 18.5, 18.2, 16.3, 
    22.2, 31.3, 31, 35.4, 20.8, 24.7, 20, 25.4), carb = c(25, 
    25, 23.8, 22.4, 20.7, 19.1, 18.3, 26.4, 24.8, 23.2, 21.8, 
    19.4, 20.3, 18.2, 14.4, 14.4, 18.7, 33.4, 32.4, 34.9, 22.5, 
    17.5, 17.2, 17.3, 21.2, 28.3, 28, 32.4, 19.8, 25.7, 23, 23.4
    )), row.names = c(NA, -32L), class = c("tbl_df", "tbl", "data.frame"
))

example_5 <- structure(list(mpg = c(21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 
24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 
30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 
19.7, 15, 21.4), cyl = c(6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 
8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, 6, 8, 4), 
    disp = c("LOW", "LOW", "LOW", "HIGH", "HIGH", "LOW", "HIGH", 
    "LOW", "LOW", "LOW", "LOW", "HIGH", "HIGH", "HIGH", "HIGH", 
    "HIGH", "HIGH", "LOW", "LOW", "LOW", "LOW", "HIGH", "HIGH", 
    "HIGH", "HIGH", "LOW", "LOW", "LOW", "HIGH", "LOW", "HIGH", 
    "LOW"), hp = c(110, 110, 93, 110, 175, 105, 245, 62, 95, 
    123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 
    150, 245, 175, 66, 91, 113, 264, 175, 335, 109), drat = c("HIGH", 
    "HIGH", "HIGH", "LOW", "LOW", "LOW", "LOW", "HIGH", "HIGH", 
    "HIGH", "HIGH", "LOW", "LOW", "LOW", "LOW", "LOW", "LOW", 
    "HIGH", "HIGH", "HIGH", "HIGH", "LOW", "LOW", "HIGH", "LOW", 
    "HIGH", "HIGH", "HIGH", "HIGH", "HIGH", "LOW", "HIGH"), wt = c(2.62, 
    2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 3.15, 3.44, 3.44, 
    4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 1.615, 1.835, 
    2.465, 3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 1.513, 3.17, 
    2.77, 3.57, 2.78), qsec = c(16.46, 17.02, 18.61, 19.44, 17.02, 
    20.22, 15.84, 20, 22.9, 18.3, 18.9, 17.4, 17.6, 18, 17.98, 
    17.82, 17.42, 19.47, 18.52, 19.9, 20.01, 16.87, 17.3, 15.41, 
    17.05, 18.9, 16.7, 16.9, 14.5, 15.5, 14.6, 18.6), vs = c(0, 
    0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 
    1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1), am = c(1, 1, 1, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 
    0, 1, 1, 1, 1, 1, 1, 1), gear = c(4, 4, 4, 3, 3, 3, 3, 4, 
    4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 4, 5, 
    5, 5, 5, 5, 4), carb = c(4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 
    3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 2, 2, 4, 6, 
    8, 2)), row.names = c(NA, -32L), class = c("tbl_df", "tbl", 
"data.frame"))

trade_data_1 <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(118.361609958853, 
94.9079735432539, 120.847970218211, 92.8352934083974, 117.984289800332, 
99.9753108489066, 70.9342139590409, 99.143368268306, 96.7735213992227, 
126.616168121473, 89.8745412053088, 101.711180355775, 70.6863866604996, 
62.4683104879717, 101.987506392562, 131.244939298783, 99.527555922732, 
116.892893369584, 121.086122990093, 79.300156820636, 94.7863628990049, 
90.7398997103682, 72.8816985106823, 140.391119078257, 105.80668786767, 
87.8920502932156, 86.7317401162545, 143.096757249428, 120.561243191416, 
107.848570084594, 97.5125572616074, 78.4230195288181, 98.8153725652623, 
83.6616211331865, 125.338546288386, 128.208617516762, 110.861648060383
), VIC_exports = c(112.251795238633, 128.603869727699, 99.3217228092517, 
62.9042049455753, 91.0041989269818, 105.694063064252, 112.367527783457, 
133.724027531722, 120.118646014624, 86.986981210253, 59.4526877665351, 
92.0115492462664, 91.1315047020107, 90.3041138010625, 122.235392087578, 
118.294338210728, 143.370335833233, 74.8132492149798, 88.3595491332121, 
106.884603479899, 87.4028877037292, 88.3972565699634, 125.468946609217, 
109.108442176366, 112.678302981283, 137.718090309193, 148.794770911232, 
91.7836980605346, 94.8571912872013, 126.107851793847, 91.0493785142678, 
120.169662482299, 76.2046781571964, 112.167295586755, 78.4883930912851, 
87.9764521560675, 143.323645280652), NSW_imports = c(83.4693757001936, 
114.616482514669, 88.3833114338856, 114.42110479125, 90.1185757366546, 
98.8769976172832, 102.040468045896, 41.4314724336248, 87.7631640601472, 
74.8839801256318, 96.3457229928539, 72.4244041428919, 89.4594858125868, 
73.2579010677783, 97.1857879057725, 73.2233961314219, 109.480399901951, 
112.923869956233, 133.888632749088, 141.893407147862, 113.531890642549, 
133.084515725655, 112.403601577365, 85.8418667584933, 105.603282509374, 
140.939599363888, 105.832852936715, 111.408289966449, 102.387615586624, 
78.1164170779477, 121.16702661618, 120.764881103008, 77.2252106914023, 
111.234637997448, 111.952400873162, 115.610187223344, 112.179480585542
), VIC_imports = c(107.706096253044, 107.139820318252, 61.9243276093578, 
106.611369428421, 137.622873204132, 109.60958110016, 93.7051201707994, 
96.7730459842727, 113.848484493362, 118.371757250661, 114.484961974337, 
103.455010475374, 92.9880730931228, 105.022584786338, 115.273600557729, 
89.5593930846402, 106.247998487713, 81.5074351401414, 116.955891995215, 
121.202526209254, 112.80712060021, 69.3585722157066, 102.636801976978, 
56.2016272769602, 122.835802147533, 116.226356881366, 128.679079376411, 
74.6769501072018, 95.5666689520086, 78.9358611133632, 140.133018549381, 
150.33948451165, 105.539371431757, 115.953138545791, 86.5912727438131, 
91.9617567059474, 82.0463696326032)), class = c("tbl_df", "tbl", 
"data.frame"), row.names = c(NA, -37L))

example_6 <- structure(list(NSW_exports_growth = c(NA, -19.8152394376457, 
27.3317358979692, -23.1800970750537, 27.0899088790514, -15.2638787603864, 
-29.0482686608054, 39.7680508950924, -2.39032313555247, 30.8376157969281, 
-29.0181162968974, 13.1701803333015, -30.5028351718603, -11.6261087329285, 
63.2627897183164, 28.687271550307, -24.1665572368056, 17.4477683952506, 
3.58724084898057, -34.5092939947179, 19.528594518919, -4.26903519122078, 
-19.6806490382812, 92.6287695637057, -24.6343439938736, -16.9314794135321, 
-1.32015372617905, 64.9877623320166, -15.7484449621252, -10.5445769886745, 
-9.58381999397812, -19.5764917553908, 26.0030194692397, -15.335419012935, 
49.8160621210668, 2.28985520685083, -13.5302679276693), VIC_exports_growth = c(NA, 
14.5673166779237, -22.7692580172343, -36.6662164465437, 44.6710899624573, 
16.1419630198124, 6.31394472473685, 19.0059354063755, -10.1742235619325, 
-27.5824494394797, -31.6533498008924, 54.7643221910956, -0.956450088564731, 
-0.907908745338604, 35.3597161219686, -3.2241512131165, 21.1979694056317, 
-47.8181809506244, 18.1068193941241, 20.9655374302085, -18.226868175484, 
1.13768422572573, 41.9376024525289, -13.0394849681866, 3.27184655349282, 
22.2223681626349, 8.04301060025643, -38.3152395084562, 3.34862648990202, 
32.9449566053751, -27.80038893763, 31.9829574272906, -36.585760013746, 
47.1921387232606, -30.02559910114, 12.0884868336486, 62.9113720412369
), NSW_imports_growth = c(NA, 37.3156101302949, -22.8877823723355, 
29.4600789843017, -21.2395511290795, 9.71877530135698, 3.1993997641973, 
-59.3970184309722, 111.827287096175, -14.6749311883159, 28.6599922055639, 
-24.828625606698, 23.5211899515046, -18.1105274612801, 32.6625339918708, 
-24.6562715503048, 49.5155997755895, 3.14528450514009, 18.5653952534399, 
5.97868111311268, -19.987902944468, 17.2221434633437, -15.5396847150292, 
-23.6306794854698, 23.020719955307, 33.4613811378232, -24.9090721029592, 
5.26815339001394, -8.09695075881863, -23.7052092380662, 55.1108347625247, 
-0.331893522852611, -36.0532548982249, 44.0392806980484, 0.645269215269351, 
3.26726923375773, -2.96747779776042), VIC_imports_growth = c(NA, 
-0.525760337150716, -42.2023226981198, 72.1639516232879, 29.0883645355779, 
-20.3551135445489, -14.5101010055203, 3.2740215346625, 17.6448290279762, 
3.97306365335299, -3.28354952786052, -9.6344107634287, -10.1173808152511, 
12.9419949170932, 9.76077268736657, -22.3071087817813, 18.6341206972014, 
-23.2856747418473, 43.4910714514868, 3.63097073742422, -6.92675794112561, 
-38.5157853097639, 47.9799809860201, -45.2422267701143, 118.562714460564, 
-5.3807156794794, 10.714198422097, -41.9665182024207, 27.9734493907675, 
-17.4023098440284, 77.5276997968392, 7.28341262317977, -29.7992993826061, 
9.86718697748574, -25.3221828837196, 6.20210766277016, -10.782076624579
)), row.names = c(NA, -37L), class = c("tbl_df", "tbl", "data.frame"
))

example_7 <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(118.361609958853, 
94.9079735432539, 120.847970218211, 92.8352934083974, 117.984289800332, 
99.9753108489066, 70.9342139590409, 99.143368268306, 96.7735213992227, 
126.616168121473, 89.8745412053088, 101.711180355775, 70.6863866604996, 
62.4683104879717, 101.987506392562, 131.244939298783, 99.527555922732, 
116.892893369584, 121.086122990093, 79.300156820636, 94.7863628990049, 
90.7398997103682, 72.8816985106823, 140.391119078257, 105.80668786767, 
87.8920502932156, 86.7317401162545, 143.096757249428, 120.561243191416, 
107.848570084594, 97.5125572616074, 78.4230195288181, 98.8153725652623, 
83.6616211331865, 125.338546288386, 128.208617516762, 110.861648060383
), VIC_exports = c(112.251795238633, 128.603869727699, 99.3217228092517, 
62.9042049455753, 91.0041989269818, 105.694063064252, 112.367527783457, 
133.724027531722, 120.118646014624, 86.986981210253, 59.4526877665351, 
92.0115492462664, 91.1315047020107, 90.3041138010625, 122.235392087578, 
118.294338210728, 143.370335833233, 74.8132492149798, 88.3595491332121, 
106.884603479899, 87.4028877037292, 88.3972565699634, 125.468946609217, 
109.108442176366, 112.678302981283, 137.718090309193, 148.794770911232, 
91.7836980605346, 94.8571912872013, 126.107851793847, 91.0493785142678, 
120.169662482299, 76.2046781571964, 112.167295586755, 78.4883930912851, 
87.9764521560675, 143.323645280652), NSW_imports = c(83.4693757001936, 
114.616482514669, 88.3833114338856, 114.42110479125, 90.1185757366546, 
98.8769976172832, 102.040468045896, 41.4314724336248, 87.7631640601472, 
74.8839801256318, 96.3457229928539, 72.4244041428919, 89.4594858125868, 
73.2579010677783, 97.1857879057725, 73.2233961314219, 109.480399901951, 
112.923869956233, 133.888632749088, 141.893407147862, 113.531890642549, 
133.084515725655, 112.403601577365, 85.8418667584933, 105.603282509374, 
140.939599363888, 105.832852936715, 111.408289966449, 102.387615586624, 
78.1164170779477, 121.16702661618, 120.764881103008, 77.2252106914023, 
111.234637997448, 111.952400873162, 115.610187223344, 112.179480585542
), VIC_imports = c(107.706096253044, 107.139820318252, 61.9243276093578, 
106.611369428421, 137.622873204132, 109.60958110016, 93.7051201707994, 
96.7730459842727, 113.848484493362, 118.371757250661, 114.484961974337, 
103.455010475374, 92.9880730931228, 105.022584786338, 115.273600557729, 
89.5593930846402, 106.247998487713, 81.5074351401414, 116.955891995215, 
121.202526209254, 112.80712060021, 69.3585722157066, 102.636801976978, 
56.2016272769602, 122.835802147533, 116.226356881366, 128.679079376411, 
74.6769501072018, 95.5666689520086, 78.9358611133632, 140.133018549381, 
150.33948451165, 105.539371431757, 115.953138545791, 86.5912727438131, 
91.9617567059474, 82.0463696326032), AUS_exports = c(230.613405197486, 
223.511843270953, 220.169693027463, 155.739498353973, 208.988488727314, 
205.669373913159, 183.301741742498, 232.867395800028, 216.892167413847, 
213.603149331726, 149.327228971844, 193.722729602041, 161.81789136251, 
152.772424289034, 224.22289848014, 249.539277509511, 242.897891755965, 
191.706142584564, 209.445672123305, 186.184760300535, 182.189250602734, 
179.137156280332, 198.350645119899, 249.499561254623, 218.484990848953, 
225.610140602409, 235.526511027486, 234.880455309963, 215.418434478617, 
233.956421878441, 188.561935775875, 198.592682011117, 175.020050722459, 
195.828916719942, 203.826939379671, 216.185069672829, 254.185293341035
), AUS_growth = c(NA, -3.07942286375401, -1.49529000100397, -29.2638799589248, 
34.1910632409474, -1.58818068610751, -10.875528886525, 27.0404708576964, 
-6.86022546492503, -1.51643008658999, -30.0912793472261, 29.7303451861203, 
-16.4693313505711, -5.5899054160903, 46.7692219480178, 11.2907197262073, 
-2.66145907763673, -21.0754193053403, 9.2535008527002, -11.1059405462797, 
-2.14599180478116, -1.67523293076033, 10.7255743244581, 25.7871186170356, 
-12.4307114007381, 3.26116211725567, 4.39535669744271, -0.27430275882977, 
-8.28592604934371, 8.60557149841501, -19.402966474736, 5.31960291665887, 
-11.8698388329026, 11.8894183332634, 4.08418878768948, 6.06305051273852, 
17.5776355535164), NSW_exports_c2growth = c(NA, -10.170109753817, 
11.6056475108173, -12.7232210867094, 16.1481169887774, -8.61721095793144, 
-14.1202826348506, 15.3894633193902, -1.0176808397507, 13.7592090475578, 
-17.2008825858201, 7.92664488048461, -16.0150508714226, -5.07859551458217, 
25.8680164882524, 13.0483697715701, -12.7103771769324, 7.14923349944043, 
2.18732147232023, -19.9507422358466, 8.31765502899992, -2.22102191827994, 
-9.96901009846311, 34.0353924872624, -13.8615198506471, -8.19948203528519, 
-0.514298769489228, 23.93149581645, -9.59446116036891, -5.90138589466161, 
-4.41792225235732, -10.123749342221, 10.2684312583596, -8.65829450370012, 
21.2823141001196, 1.40809219679734, -8.02412927156883), VIC_exports_c2growth = c(NA, 
7.090686890063, -13.1009375118212, -16.5406588722154, 18.04294625217, 
7.02903027182392, 3.2447537483256, 11.6510075383062, -5.84254462517433, 
-15.2756391341478, -12.8903967614059, 21.8037003056357, -0.454280479148495, 
-0.511309901508141, 20.9012054597654, -1.75765004536282, 10.0489180992957, 
-28.2246528047807, 7.06617938037998, 8.84480168956693, -10.4636468337811, 
0.545788987519593, 20.6945844229212, -8.24827387022683, 1.43080844990899, 
11.4606441525409, 4.90965546693195, -24.2057985752797, 1.30853511102519, 
14.5069573930766, -14.9850442223787, 15.4433522588799, -22.1382700912622, 
20.5477128369635, -17.1981253124301, 4.65495831594118, 25.6017648250852
), AUS_exports_c2growth = c(NA, -3.07942286375401, -1.49529000100396, 
-29.2638799589248, 34.1910632409474, -1.58818068610751, -10.875528886525, 
27.0404708576964, -6.86022546492503, -1.51643008659, -30.0912793472261, 
29.7303451861203, -16.4693313505711, -5.58990541609031, 46.7692219480178, 
11.2907197262073, -2.66145907763673, -21.0754193053403, 9.25350085270021, 
-11.1059405462797, -2.14599180478115, -1.67523293076033, 10.7255743244581, 
25.7871186170356, -12.4307114007381, 3.26116211725568, 4.39535669744272, 
-0.274302758829768, -8.2859260493437, 8.605571498415, -19.402966474736, 
5.31960291665888, -11.8698388329026, 11.8894183332634, 4.08418878768947, 
6.06305051273852, 17.5776355535164)), row.names = c(NA, -37L), class = c("tbl_df", 
"tbl", "data.frame"))

example_8 <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(118.361609958853, 
94.9079735432539, 120.847970218211, 92.8352934083974, 117.984289800332, 
99.9753108489066, 70.9342139590409, 99.143368268306, 96.7735213992227, 
126.616168121473, 89.8745412053088, 101.711180355775, 70.6863866604996, 
62.4683104879717, 101.987506392562, 131.244939298783, 99.527555922732, 
116.892893369584, 121.086122990093, 79.300156820636, 94.7863628990049, 
90.7398997103682, 72.8816985106823, 140.391119078257, 105.80668786767, 
87.8920502932156, 86.7317401162545, 143.096757249428, 120.561243191416, 
107.848570084594, 97.5125572616074, 78.4230195288181, 98.8153725652623, 
83.6616211331865, 125.338546288386, 128.208617516762, 110.861648060383
), VIC_exports = c(112.251795238633, 128.603869727699, 99.3217228092517, 
62.9042049455753, 91.0041989269818, 105.694063064252, 112.367527783457, 
133.724027531722, 120.118646014624, 86.986981210253, 59.4526877665351, 
92.0115492462664, 91.1315047020107, 90.3041138010625, 122.235392087578, 
118.294338210728, 143.370335833233, 74.8132492149798, 88.3595491332121, 
106.884603479899, 87.4028877037292, 88.3972565699634, 125.468946609217, 
109.108442176366, 112.678302981283, 137.718090309193, 148.794770911232, 
91.7836980605346, 94.8571912872013, 126.107851793847, 91.0493785142678, 
120.169662482299, 76.2046781571964, 112.167295586755, 78.4883930912851, 
87.9764521560675, 143.323645280652), NSW_imports = c(83.4693757001936, 
114.616482514669, 88.3833114338856, 114.42110479125, 90.1185757366546, 
98.8769976172832, 102.040468045896, 41.4314724336248, 87.7631640601472, 
74.8839801256318, 96.3457229928539, 72.4244041428919, 89.4594858125868, 
73.2579010677783, 97.1857879057725, 73.2233961314219, 109.480399901951, 
112.923869956233, 133.888632749088, 141.893407147862, 113.531890642549, 
133.084515725655, 112.403601577365, 85.8418667584933, 105.603282509374, 
140.939599363888, 105.832852936715, 111.408289966449, 102.387615586624, 
78.1164170779477, 121.16702661618, 120.764881103008, 77.2252106914023, 
111.234637997448, 111.952400873162, 115.610187223344, 112.179480585542
), VIC_imports = c(107.706096253044, 107.139820318252, 61.9243276093578, 
106.611369428421, 137.622873204132, 109.60958110016, 93.7051201707994, 
96.7730459842727, 113.848484493362, 118.371757250661, 114.484961974337, 
103.455010475374, 92.9880730931228, 105.022584786338, 115.273600557729, 
89.5593930846402, 106.247998487713, 81.5074351401414, 116.955891995215, 
121.202526209254, 112.80712060021, 69.3585722157066, 102.636801976978, 
56.2016272769602, 122.835802147533, 116.226356881366, 128.679079376411, 
74.6769501072018, 95.5666689520086, 78.9358611133632, 140.133018549381, 
150.33948451165, 105.539371431757, 115.953138545791, 86.5912727438131, 
91.9617567059474, 82.0463696326032), AUS_exports = c(230.613405197486, 
223.511843270953, 220.169693027462, 155.739498353973, 208.988488727314, 
205.669373913158, 183.301741742498, 232.867395800028, 216.892167413847, 
213.603149331726, 149.327228971844, 193.722729602042, 161.81789136251, 
152.772424289034, 224.22289848014, 249.539277509512, 242.897891755965, 
191.706142584564, 209.445672123305, 186.184760300535, 182.189250602734, 
179.137156280332, 198.350645119899, 249.499561254623, 218.484990848953, 
225.610140602408, 235.526511027486, 234.880455309963, 215.418434478618, 
233.956421878442, 188.561935775875, 198.592682011117, 175.020050722459, 
195.828916719941, 203.826939379671, 216.18506967283, 254.185293341035
), NSW_exports_growth = c(NA, -19.8152394376457, 27.3317358979692, 
-23.1800970750537, 27.0899088790514, -15.2638787603864, -29.0482686608054, 
39.7680508950924, -2.39032313555247, 30.8376157969281, -29.0181162968974, 
13.1701803333015, -30.5028351718603, -11.6261087329285, 63.2627897183164, 
28.687271550307, -24.1665572368056, 17.4477683952506, 3.58724084898057, 
-34.5092939947179, 19.528594518919, -4.26903519122078, -19.6806490382812, 
92.6287695637057, -24.6343439938736, -16.9314794135321, -1.32015372617905, 
64.9877623320166, -15.7484449621252, -10.5445769886745, -9.58381999397812, 
-19.5764917553908, 26.0030194692397, -15.335419012935, 49.8160621210668, 
2.28985520685083, -13.5302679276693), NSW_exports_cummin = c(118.361609958853, 
94.9079735432539, 94.9079735432539, 92.8352934083974, 92.8352934083974, 
92.8352934083974, 70.9342139590409, 70.9342139590409, 70.9342139590409, 
70.9342139590409, 70.9342139590409, 70.9342139590409, 70.6863866604996, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717
), VIC_exports_growth = c(NA, 14.5673166779237, -22.7692580172343, 
-36.6662164465437, 44.6710899624573, 16.1419630198124, 6.31394472473685, 
19.0059354063755, -10.1742235619325, -27.5824494394797, -31.6533498008924, 
54.7643221910956, -0.956450088564731, -0.907908745338604, 35.3597161219686, 
-3.2241512131165, 21.1979694056317, -47.8181809506244, 18.1068193941241, 
20.9655374302085, -18.226868175484, 1.13768422572573, 41.9376024525289, 
-13.0394849681866, 3.27184655349282, 22.2223681626349, 8.04301060025643, 
-38.3152395084562, 3.34862648990202, 32.9449566053751, -27.80038893763, 
31.9829574272906, -36.585760013746, 47.1921387232606, -30.02559910114, 
12.0884868336486, 62.9113720412369), VIC_exports_cummin = c(112.251795238633, 
112.251795238633, 99.3217228092517, 62.9042049455753, 62.9042049455753, 
62.9042049455753, 62.9042049455753, 62.9042049455753, 62.9042049455753, 
62.9042049455753, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351
), NSW_imports_growth = c(NA, 37.3156101302949, -22.8877823723355, 
29.4600789843017, -21.2395511290795, 9.71877530135698, 3.1993997641973, 
-59.3970184309722, 111.827287096175, -14.6749311883159, 28.6599922055639, 
-24.828625606698, 23.5211899515046, -18.1105274612801, 32.6625339918708, 
-24.6562715503048, 49.5155997755895, 3.14528450514009, 18.5653952534399, 
5.97868111311268, -19.987902944468, 17.2221434633437, -15.5396847150292, 
-23.6306794854698, 23.020719955307, 33.4613811378232, -24.9090721029592, 
5.26815339001394, -8.09695075881863, -23.7052092380662, 55.1108347625247, 
-0.331893522852611, -36.0532548982249, 44.0392806980484, 0.645269215269351, 
3.26726923375773, -2.96747779776042), NSW_imports_cummin = c(83.4693757001936, 
83.4693757001936, 83.4693757001936, 83.4693757001936, 83.4693757001936, 
83.4693757001936, 83.4693757001936, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248
), VIC_imports_growth = c(NA, -0.525760337150716, -42.2023226981198, 
72.1639516232879, 29.0883645355779, -20.3551135445489, -14.5101010055203, 
3.2740215346625, 17.6448290279762, 3.97306365335299, -3.28354952786052, 
-9.6344107634287, -10.1173808152511, 12.9419949170932, 9.76077268736657, 
-22.3071087817813, 18.6341206972014, -23.2856747418473, 43.4910714514868, 
3.63097073742422, -6.92675794112561, -38.5157853097639, 47.9799809860201, 
-45.2422267701143, 118.562714460564, -5.3807156794794, 10.714198422097, 
-41.9665182024207, 27.9734493907675, -17.4023098440284, 77.5276997968392, 
7.28341262317977, -29.7992993826061, 9.86718697748574, -25.3221828837196, 
6.20210766277016, -10.782076624579), VIC_imports_cummin = c(107.706096253044, 
107.139820318252, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602
), AUS_exports_growth = c(NA, -3.07942286375389, -1.49529000100435, 
-29.2638799589247, 34.1910632409476, -1.5881806861078, -10.8755288865249, 
27.0404708576964, -6.86022546492487, -1.51643008659015, -30.0912793472261, 
29.7303451861206, -16.4693313505713, -5.58990541609036, 46.7692219480177, 
11.2907197262077, -2.66145907763699, -21.0754193053403, 9.25350085270025, 
-11.1059405462795, -2.14599180478122, -1.67523293076044, 10.7255743244579, 
25.7871186170356, -12.4307114007379, 3.26116211725545, 4.3953566974428, 
-0.27430275882957, -8.28592604934372, 8.60557149841523, -19.4029664747362, 
5.31960291665874, -11.8698388329025, 11.8894183332632, 4.08418878768975, 
6.06305051273839, 17.5776355535165), AUS_exports_cummin = c(230.613405197486, 
223.511843270953, 220.169693027462, 155.739498353973, 155.739498353973, 
155.739498353973, 155.739498353973, 155.739498353973, 155.739498353973, 
155.739498353973, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844
)), row.names = c(NA, -37L), class = c("tbl_df", "tbl", "data.frame"
))

example_8_reframe <- structure(list(NSW_exports_growth = c(NA, -19.8152394376457, 
27.3317358979692, -23.1800970750537, 27.0899088790514, -15.2638787603864, 
-29.0482686608054, 39.7680508950924, -2.39032313555247, 30.8376157969281, 
-29.0181162968974, 13.1701803333015, -30.5028351718603, -11.6261087329285, 
63.2627897183164, 28.687271550307, -24.1665572368056, 17.4477683952506, 
3.58724084898057, -34.5092939947179, 19.528594518919, -4.26903519122078, 
-19.6806490382812, 92.6287695637057, -24.6343439938736, -16.9314794135321, 
-1.32015372617905, 64.9877623320166, -15.7484449621252, -10.5445769886745, 
-9.58381999397812, -19.5764917553908, 26.0030194692397, -15.335419012935, 
49.8160621210668, 2.28985520685083, -13.5302679276693), NSW_exports_cummin = c(118.361609958853, 
94.9079735432539, 94.9079735432539, 92.8352934083974, 92.8352934083974, 
92.8352934083974, 70.9342139590409, 70.9342139590409, 70.9342139590409, 
70.9342139590409, 70.9342139590409, 70.9342139590409, 70.6863866604996, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717, 
62.4683104879717, 62.4683104879717, 62.4683104879717, 62.4683104879717
), VIC_exports_growth = c(NA, 14.5673166779237, -22.7692580172343, 
-36.6662164465437, 44.6710899624573, 16.1419630198124, 6.31394472473685, 
19.0059354063755, -10.1742235619325, -27.5824494394797, -31.6533498008924, 
54.7643221910956, -0.956450088564731, -0.907908745338604, 35.3597161219686, 
-3.2241512131165, 21.1979694056317, -47.8181809506244, 18.1068193941241, 
20.9655374302085, -18.226868175484, 1.13768422572573, 41.9376024525289, 
-13.0394849681866, 3.27184655349282, 22.2223681626349, 8.04301060025643, 
-38.3152395084562, 3.34862648990202, 32.9449566053751, -27.80038893763, 
31.9829574272906, -36.585760013746, 47.1921387232606, -30.02559910114, 
12.0884868336486, 62.9113720412369), VIC_exports_cummin = c(112.251795238633, 
112.251795238633, 99.3217228092517, 62.9042049455753, 62.9042049455753, 
62.9042049455753, 62.9042049455753, 62.9042049455753, 62.9042049455753, 
62.9042049455753, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351, 
59.4526877665351, 59.4526877665351, 59.4526877665351, 59.4526877665351
), NSW_imports_growth = c(NA, 37.3156101302949, -22.8877823723355, 
29.4600789843017, -21.2395511290795, 9.71877530135698, 3.1993997641973, 
-59.3970184309722, 111.827287096175, -14.6749311883159, 28.6599922055639, 
-24.828625606698, 23.5211899515046, -18.1105274612801, 32.6625339918708, 
-24.6562715503048, 49.5155997755895, 3.14528450514009, 18.5653952534399, 
5.97868111311268, -19.987902944468, 17.2221434633437, -15.5396847150292, 
-23.6306794854698, 23.020719955307, 33.4613811378232, -24.9090721029592, 
5.26815339001394, -8.09695075881863, -23.7052092380662, 55.1108347625247, 
-0.331893522852611, -36.0532548982249, 44.0392806980484, 0.645269215269351, 
3.26726923375773, -2.96747779776042), NSW_imports_cummin = c(83.4693757001936, 
83.4693757001936, 83.4693757001936, 83.4693757001936, 83.4693757001936, 
83.4693757001936, 83.4693757001936, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248, 
41.4314724336248, 41.4314724336248, 41.4314724336248, 41.4314724336248
), VIC_imports_growth = c(NA, -0.525760337150716, -42.2023226981198, 
72.1639516232879, 29.0883645355779, -20.3551135445489, -14.5101010055203, 
3.2740215346625, 17.6448290279762, 3.97306365335299, -3.28354952786052, 
-9.6344107634287, -10.1173808152511, 12.9419949170932, 9.76077268736657, 
-22.3071087817813, 18.6341206972014, -23.2856747418473, 43.4910714514868, 
3.63097073742422, -6.92675794112561, -38.5157853097639, 47.9799809860201, 
-45.2422267701143, 118.562714460564, -5.3807156794794, 10.714198422097, 
-41.9665182024207, 27.9734493907675, -17.4023098440284, 77.5276997968392, 
7.28341262317977, -29.7992993826061, 9.86718697748574, -25.3221828837196, 
6.20210766277016, -10.782076624579), VIC_imports_cummin = c(107.706096253044, 
107.139820318252, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 61.9243276093578, 61.9243276093578, 
61.9243276093578, 61.9243276093578, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602, 
56.2016272769602, 56.2016272769602, 56.2016272769602, 56.2016272769602
), AUS_exports_growth = c(NA, -3.07942286375389, -1.49529000100435, 
-29.2638799589247, 34.1910632409476, -1.5881806861078, -10.8755288865249, 
27.0404708576964, -6.86022546492487, -1.51643008659015, -30.0912793472261, 
29.7303451861206, -16.4693313505713, -5.58990541609036, 46.7692219480177, 
11.2907197262077, -2.66145907763699, -21.0754193053403, 9.25350085270025, 
-11.1059405462795, -2.14599180478122, -1.67523293076044, 10.7255743244579, 
25.7871186170356, -12.4307114007379, 3.26116211725545, 4.3953566974428, 
-0.27430275882957, -8.28592604934372, 8.60557149841523, -19.4029664747362, 
5.31960291665874, -11.8698388329025, 11.8894183332632, 4.08418878768975, 
6.06305051273839, 17.5776355535165), AUS_exports_cummin = c(230.613405197486, 
223.511843270953, 220.169693027462, 155.739498353973, 155.739498353973, 
155.739498353973, 155.739498353973, 155.739498353973, 155.739498353973, 
155.739498353973, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844, 
149.327228971844, 149.327228971844, 149.327228971844, 149.327228971844
)), row.names = c(NA, -37L), class = c("tbl_df", "tbl", "data.frame"
))

trade_data_2 <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(95.8414438077584, 
89.6397845280165, 86.0573923793593, 75.8016424906482, 99.8097876566637, 
97.722548719682, 95.8361896805013, 109.34383010194, 105.275875251477, 
81.961438280057, 109.038682254073, 83.1461605245547, 71.2122146751144, 
77.8708361196383, 104.358152098802, 108.093511024672, 106.194094394074, 
71.2196573640116, 119.560933214454, 53.5013698928308, 116.004931694595, 
128.042556408252, 102.430942300889, 95.5857532763189, 98.9294920898825, 
72.3452240301981, 130.146460781408, 85.7297617164995, 73.669623801939, 
93.0293289479722, 123.517738937757, 100.550207648376, 84.982920374038, 
95.5864347401837, 99.2694788236836, 108.843851289571, 75.7583789265809
), VIC_exports = c(95.4350144099321, 116.463471497863, 147.250819105649, 
95.8259291370362, 120.398659694477, 90.9143195261369, 148.612459191856, 
99.761773740783, 86.0283209321898, 118.509780611141, 109.5513154326, 
87.0810760329421, 91.9056069404254, 97.7875159138284, 104.687289772056, 
121.085125672861, 100.549267940752, 113.777193605317, 114.903733653873, 
94.6240528041542, 82.9168215287409, 122.425414695442, 128.670172783542, 
95.6221309124644, 133.177972677144, 107.531766748852, 111.978591695483, 
86.3920304108652, 67.1913928749589, 86.8153634269292, 103.431160849147, 
87.4826722612422, 103.821438479305, 47.8851758021435, 83.5879066161382, 
79.7858906740845, 86.0613586090918), QLD_exports = c(114.385699881718, 
113.00364073963, 99.4948522010438, 82.0758960943099, 138.301637914429, 
95.9698195493392, 79.3138723010289, 109.998853018976, 98.3102607198676, 
92.2232427627121, 105.120785807955, 84.0569537933959, 120.647132952277, 
126.180298115547, 93.8224676197797, 81.4029101691586, 110.999204958749, 
113.07542303671, 98.6692761063428, 67.2605508442334, 129.105097909184, 
97.5387309980077, 126.045489052587, 49.5208832525458, 128.993820099758, 
86.2648452478117, 135.548721457099, 98.0483767909338, 83.3831955738341, 
97.628337882174, 84.3675839053324, 71.0153394214875, 82.7994436409536, 
111.884692132372, 110.606035990454, 109.715020889755, 83.2327852967469
), SA_exports = c(94.1106262381901, 101.09192759264, 119.86315480091, 
97.3149999312511, 121.600909865825, 102.713757717045, 122.379737270867, 
101.709848767437, 73.301160099367, 88.4385122553382, 79.8827597587577, 
100.633828214044, 81.5534905496531, 104.800019129686, 105.042836008126, 
110.806392191098, 126.251116040483, 85.0137606037023, 123.261980676596, 
109.89509905454, 108.610677877078, 87.9959169766759, 121.846131635685, 
134.916033638633, 139.6410023564, 57.9252253552357, 148.268682202444, 
88.1461965690257, 71.5063605463631, 83.5430216592622, 118.958716211463, 
117.171711706939, 88.6437989124911, 121.70375138297, 139.358662287797, 
109.791478311778, 120.789485838254), NSW_imports = c(100.822987017408, 
96.0484907278406, 70.5755928409279, 94.0828052366847, 93.5578464444307, 
81.1651285308118, 94.2944267551334, 91.1374369030333, 102.01777947086, 
127.241793023641, 104.005844883143, 106.689988974131, 87.8964955625407, 
87.6815190991393, 74.1369095608459, 111.985962873915, 102.649951433621, 
76.9767370506886, 144.590815664748, 102.519671191591, 58.2351403304739, 
105.9986846878, 107.649757238037, 123.133551199877, 129.77968190439, 
131.592809556744, 105.65885827936, 127.764417152375, 117.245050088647, 
93.1719822290131, 68.1660663755487, 92.5545536165007, 94.9115428627589, 
105.788235345741, 73.0813936716734, 79.4491344296678, 106.324239572238
), VIC_imports = c(119.881326993228, 72.8019934446876, 90.9624390421695, 
90.6741778005324, 102.747232274965, 83.5356065085151, 54.5016137499819, 
78.1280533672743, 93.2734312861034, 109.473020106515, 90.0578086398267, 
86.6500053937645, 95.7025739373388, 127.568023982024, 95.7034006075364, 
112.344214458473, 86.9642142831438, 94.3372064176442, 130.222732770178, 
134.409452316505, 155.428968860875, 68.0096840143325, 105.890437610919, 
99.6203206860303, 75.2824869603338, 115.735837280929, 86.3729131636829, 
82.9310390614736, 124.091276000132, 78.3771699207085, 103.922346278543, 
83.46751946436, 119.657072906062, 130.545421950807, 85.3419505676208, 
66.6837340290944, 107.143966960819), QLD_imports = c(117.014753210344, 
125.076285998082, 108.075751424447, 116.149841712693, 87.9637184983449, 
110.875027675137, 82.5321193987835, 104.199571043689, 143.935477400118, 
111.264962389829, 156.468289209552, 121.003664155774, 72.3963435087795, 
62.5810957709165, 93.1572596821912, 96.201419894079, 108.208394187603, 
143.120402834117, 100.482336218757, 90.3699496924852, 119.842190985584, 
76.5136022404434, 113.867026350874, 73.763983941927, 97.4476075534353, 
83.264825032814, 111.058877792351, 117.424727536356, 94.2986966725824, 
69.2682633255994, 116.064867828189, 89.6551681568459, 107.372700010825, 
109.739805909577, 95.088706897123, 120.201880826983, 77.6895274838571
), SA_imports = c(110.010396485493, 101.869312280892, 91.998689130028, 
90.8463801567309, 80.1179573441872, 88.6724229453134, 125.810896296793, 
99.5894916215236, 119.475709722616, 105.436655228732, 125.077041233627, 
98.6177461822122, 89.6002326761649, 106.963270889154, 50.5392680509276, 
103.113838135707, 91.5141782443978, 86.580578610622, 118.648114313074, 
82.1558631960156, 96.91564332334, 125.148092576124, 79.6646897704971, 
70.5719567581015, 90.9840854434736, 83.080486556085, 121.529762813096, 
128.865932405163, 114.773952876205, 135.732702020471, 97.3183699178946, 
136.232604828972, 77.2963919179093, 128.252357680553, 93.634663994594, 
76.3901446220594, 78.0454483875065)), class = c("tbl_df", "tbl", 
"data.frame"), row.names = c(NA, -37L))

example_dplyover <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(95.8414438077584, 
89.6397845280165, 86.0573923793593, 75.8016424906482, 99.8097876566637, 
97.722548719682, 95.8361896805013, 109.34383010194, 105.275875251477, 
81.961438280057, 109.038682254073, 83.1461605245547, 71.2122146751144, 
77.8708361196383, 104.358152098802, 108.093511024672, 106.194094394074, 
71.2196573640116, 119.560933214454, 53.5013698928308, 116.004931694595, 
128.042556408252, 102.430942300889, 95.5857532763189, 98.9294920898825, 
72.3452240301981, 130.146460781408, 85.7297617164995, 73.669623801939, 
93.0293289479722, 123.517738937757, 100.550207648376, 84.982920374038, 
95.5864347401837, 99.2694788236836, 108.843851289571, 75.7583789265809
), VIC_exports = c(95.4350144099321, 116.463471497863, 147.250819105649, 
95.8259291370362, 120.398659694477, 90.9143195261369, 148.612459191856, 
99.761773740783, 86.0283209321898, 118.509780611141, 109.5513154326, 
87.0810760329421, 91.9056069404254, 97.7875159138284, 104.687289772056, 
121.085125672861, 100.549267940752, 113.777193605317, 114.903733653873, 
94.6240528041542, 82.9168215287409, 122.425414695442, 128.670172783542, 
95.6221309124644, 133.177972677144, 107.531766748852, 111.978591695483, 
86.3920304108652, 67.1913928749589, 86.8153634269292, 103.431160849147, 
87.4826722612422, 103.821438479305, 47.8851758021435, 83.5879066161382, 
79.7858906740845, 86.0613586090918), QLD_exports = c(114.385699881718, 
113.00364073963, 99.4948522010438, 82.0758960943099, 138.301637914429, 
95.9698195493392, 79.3138723010289, 109.998853018976, 98.3102607198676, 
92.2232427627121, 105.120785807955, 84.0569537933959, 120.647132952277, 
126.180298115547, 93.8224676197797, 81.4029101691586, 110.999204958749, 
113.07542303671, 98.6692761063428, 67.2605508442334, 129.105097909184, 
97.5387309980077, 126.045489052587, 49.5208832525458, 128.993820099758, 
86.2648452478117, 135.548721457099, 98.0483767909338, 83.3831955738341, 
97.628337882174, 84.3675839053324, 71.0153394214875, 82.7994436409536, 
111.884692132372, 110.606035990454, 109.715020889755, 83.2327852967469
), SA_exports = c(94.1106262381901, 101.09192759264, 119.86315480091, 
97.3149999312511, 121.600909865825, 102.713757717045, 122.379737270867, 
101.709848767437, 73.301160099367, 88.4385122553382, 79.8827597587577, 
100.633828214044, 81.5534905496531, 104.800019129686, 105.042836008126, 
110.806392191098, 126.251116040483, 85.0137606037023, 123.261980676596, 
109.89509905454, 108.610677877078, 87.9959169766759, 121.846131635685, 
134.916033638633, 139.6410023564, 57.9252253552357, 148.268682202444, 
88.1461965690257, 71.5063605463631, 83.5430216592622, 118.958716211463, 
117.171711706939, 88.6437989124911, 121.70375138297, 139.358662287797, 
109.791478311778, 120.789485838254), NSW_imports = c(100.822987017408, 
96.0484907278406, 70.5755928409279, 94.0828052366847, 93.5578464444307, 
81.1651285308118, 94.2944267551334, 91.1374369030333, 102.01777947086, 
127.241793023641, 104.005844883143, 106.689988974131, 87.8964955625407, 
87.6815190991393, 74.1369095608459, 111.985962873915, 102.649951433621, 
76.9767370506886, 144.590815664748, 102.519671191591, 58.2351403304739, 
105.9986846878, 107.649757238037, 123.133551199877, 129.77968190439, 
131.592809556744, 105.65885827936, 127.764417152375, 117.245050088647, 
93.1719822290131, 68.1660663755487, 92.5545536165007, 94.9115428627589, 
105.788235345741, 73.0813936716734, 79.4491344296678, 106.324239572238
), VIC_imports = c(119.881326993228, 72.8019934446876, 90.9624390421695, 
90.6741778005324, 102.747232274965, 83.5356065085151, 54.5016137499819, 
78.1280533672743, 93.2734312861034, 109.473020106515, 90.0578086398267, 
86.6500053937645, 95.7025739373388, 127.568023982024, 95.7034006075364, 
112.344214458473, 86.9642142831438, 94.3372064176442, 130.222732770178, 
134.409452316505, 155.428968860875, 68.0096840143325, 105.890437610919, 
99.6203206860303, 75.2824869603338, 115.735837280929, 86.3729131636829, 
82.9310390614736, 124.091276000132, 78.3771699207085, 103.922346278543, 
83.46751946436, 119.657072906062, 130.545421950807, 85.3419505676208, 
66.6837340290944, 107.143966960819), QLD_imports = c(117.014753210344, 
125.076285998082, 108.075751424447, 116.149841712693, 87.9637184983449, 
110.875027675137, 82.5321193987835, 104.199571043689, 143.935477400118, 
111.264962389829, 156.468289209552, 121.003664155774, 72.3963435087795, 
62.5810957709165, 93.1572596821912, 96.201419894079, 108.208394187603, 
143.120402834117, 100.482336218757, 90.3699496924852, 119.842190985584, 
76.5136022404434, 113.867026350874, 73.763983941927, 97.4476075534353, 
83.264825032814, 111.058877792351, 117.424727536356, 94.2986966725824, 
69.2682633255994, 116.064867828189, 89.6551681568459, 107.372700010825, 
109.739805909577, 95.088706897123, 120.201880826983, 77.6895274838571
), SA_imports = c(110.010396485493, 101.869312280892, 91.998689130028, 
90.8463801567309, 80.1179573441872, 88.6724229453134, 125.810896296793, 
99.5894916215236, 119.475709722616, 105.436655228732, 125.077041233627, 
98.6177461822122, 89.6002326761649, 106.963270889154, 50.5392680509276, 
103.113838135707, 91.5141782443978, 86.580578610622, 118.648114313074, 
82.1558631960156, 96.91564332334, 125.148092576124, 79.6646897704971, 
70.5719567581015, 90.9840854434736, 83.080486556085, 121.529762813096, 
128.865932405163, 114.773952876205, 135.732702020471, 97.3183699178946, 
136.232604828972, 77.2963919179093, 128.252357680553, 93.634663994594, 
76.3901446220594, 78.0454483875065), NSW_exports_minus_NSW_imports = c(-4.9815432096496, 
-6.4087061998241, 15.4817995384314, -18.2811627460365, 6.25194121223301, 
16.5574201888702, 1.54176292536791, 18.2063931989067, 3.258095780617, 
-45.280354743584, 5.03283737093, -23.5438284495763, -16.6842808874263, 
-9.810682979501, 30.2212425379561, -3.892451849243, 3.544142960453, 
-5.757079686677, -25.029882450294, -49.0183012987602, 57.7697913641211, 
22.043871720452, -5.218814937148, -27.5477979235581, -30.8501898145075, 
-59.2475855265459, 24.487602502048, -42.0346554358755, -43.575426286708, 
-0.142653281040893, 55.3516725622083, 7.9956540318753, -9.9286224887209, 
-10.2018006055573, 26.1880851520102, 29.3947168599032, -30.5658606456571
), VIC_exports_minus_VIC_imports = c(-24.4463125832959, 43.6614780531754, 
56.2883800634795, 5.15175133650379, 17.651427419512, 7.37871301762179, 
94.1108454418741, 21.6337203735087, -7.2451103539136, 9.036760504626, 
19.4935067927733, 0.431070639177591, -3.7969669969134, -29.7805080681956, 
8.98388916451961, 8.74091121438799, 13.5850536576082, 19.4399871876728, 
-15.318999116305, -39.7853995123508, -72.5121473321341, 54.4157306811095, 
22.779735172623, -3.9981897735659, 57.8954857168102, -8.20407053207701, 
25.6056785318001, 3.46099134939161, -56.8998831251731, 8.4381935062207, 
-0.491185429395998, 4.01515279688221, -15.835634426757, -82.6602461486635, 
-1.7540439514826, 13.1021566449901, -21.0826083517272), QLD_exports_minus_QLD_imports = c(-2.629053328626, 
-12.072645258452, -8.58089922340321, -34.0739456183831, 50.3379194160841, 
-14.9052081257978, -3.2182470977546, 5.799281975287, -45.6252166802504, 
-19.0417196271169, -51.347503401597, -36.9467103623781, 48.2507894434975, 
63.5992023446305, 0.665207937588505, -14.7985097249204, 2.790810771146, 
-30.044979797407, -1.81306011241419, -23.1093988482518, 9.2629069236, 
21.0251287575643, 12.178462701713, -24.2431006893812, 31.5462125463227, 
3.0000202149977, 24.489843664748, -19.3763507454222, -10.9155010987483, 
28.3600745565746, -31.6972839228566, -18.6398287353584, -24.5732563698714, 
2.14488622279499, 15.517329093331, -10.486859937228, 5.54325781288979
), SA_exports_minus_SA_imports = c(-15.8997702473029, -0.777384688251999, 
27.864465670882, 6.46861977452019, 41.4829525216378, 14.0413347717316, 
-3.43115902592601, 2.12035714591339, -46.174549623249, -16.9981429733938, 
-45.1942814748693, 2.0160820318318, -8.04674212651179, -2.163251759468, 
54.5035679571984, 7.692554055391, 34.7369377960852, -1.5668180069197, 
4.61386636352199, 27.7392358585244, 11.695034553738, -37.1521755994481, 
42.1814418651879, 64.3440768805315, 48.6569169129264, -25.1552612008493, 
26.738919389348, -40.7197358361373, -43.2675923298419, -52.1896803612088, 
21.6403462935684, -19.060893122033, 11.3474069945818, -6.54860629758299, 
45.723998293203, 33.4013336897186, 42.7440374507475)), row.names = c(NA, 
-37L), class = c("tbl_df", "tbl", "data.frame"))

example_9 <- structure(list(date = structure(c(18262, 18293, 18322, 18353, 
18383, 18414, 18444, 18475, 18506, 18536, 18567, 18597, 18628, 
18659, 18687, 18718, 18748, 18779, 18809, 18840, 18871, 18901, 
18932, 18962, 18993, 19024, 19052, 19083, 19113, 19144, 19174, 
19205, 19236, 19266, 19297, 19327, 19358), class = "Date"), NSW_exports = c(95.8414438077584, 
89.6397845280165, 86.0573923793593, 75.8016424906482, 99.8097876566637, 
97.722548719682, 95.8361896805013, 109.34383010194, 105.275875251477, 
81.961438280057, 109.038682254073, 83.1461605245547, 71.2122146751144, 
77.8708361196383, 104.358152098802, 108.093511024672, 106.194094394074, 
71.2196573640116, 119.560933214454, 53.5013698928308, 116.004931694595, 
128.042556408252, 102.430942300889, 95.5857532763189, 98.9294920898825, 
72.3452240301981, 130.146460781408, 85.7297617164995, 73.669623801939, 
93.0293289479722, 123.517738937757, 100.550207648376, 84.982920374038, 
95.5864347401837, 99.2694788236836, 108.843851289571, 75.7583789265809
), VIC_exports = c(95.4350144099321, 116.463471497863, 147.250819105649, 
95.8259291370362, 120.398659694477, 90.9143195261369, 148.612459191856, 
99.761773740783, 86.0283209321898, 118.509780611141, 109.5513154326, 
87.0810760329421, 91.9056069404254, 97.7875159138284, 104.687289772056, 
121.085125672861, 100.549267940752, 113.777193605317, 114.903733653873, 
94.6240528041542, 82.9168215287409, 122.425414695442, 128.670172783542, 
95.6221309124644, 133.177972677144, 107.531766748852, 111.978591695483, 
86.3920304108652, 67.1913928749589, 86.8153634269292, 103.431160849147, 
87.4826722612422, 103.821438479305, 47.8851758021435, 83.5879066161382, 
79.7858906740845, 86.0613586090918), QLD_exports = c(114.385699881718, 
113.00364073963, 99.4948522010438, 82.0758960943099, 138.301637914429, 
95.9698195493392, 79.3138723010289, 109.998853018976, 98.3102607198676, 
92.2232427627121, 105.120785807955, 84.0569537933959, 120.647132952277, 
126.180298115547, 93.8224676197797, 81.4029101691586, 110.999204958749, 
113.07542303671, 98.6692761063428, 67.2605508442334, 129.105097909184, 
97.5387309980077, 126.045489052587, 49.5208832525458, 128.993820099758, 
86.2648452478117, 135.548721457099, 98.0483767909338, 83.3831955738341, 
97.628337882174, 84.3675839053324, 71.0153394214875, 82.7994436409536, 
111.884692132372, 110.606035990454, 109.715020889755, 83.2327852967469
), SA_exports = c(94.1106262381901, 101.09192759264, 119.86315480091, 
97.3149999312511, 121.600909865825, 102.713757717045, 122.379737270867, 
101.709848767437, 73.301160099367, 88.4385122553382, 79.8827597587577, 
100.633828214044, 81.5534905496531, 104.800019129686, 105.042836008126, 
110.806392191098, 126.251116040483, 85.0137606037023, 123.261980676596, 
109.89509905454, 108.610677877078, 87.9959169766759, 121.846131635685, 
134.916033638633, 139.6410023564, 57.9252253552357, 148.268682202444, 
88.1461965690257, 71.5063605463631, 83.5430216592622, 118.958716211463, 
117.171711706939, 88.6437989124911, 121.70375138297, 139.358662287797, 
109.791478311778, 120.789485838254), NSW_imports = c(100.822987017408, 
96.0484907278406, 70.5755928409279, 94.0828052366847, 93.5578464444307, 
81.1651285308118, 94.2944267551334, 91.1374369030333, 102.01777947086, 
127.241793023641, 104.005844883143, 106.689988974131, 87.8964955625407, 
87.6815190991393, 74.1369095608459, 111.985962873915, 102.649951433621, 
76.9767370506886, 144.590815664748, 102.519671191591, 58.2351403304739, 
105.9986846878, 107.649757238037, 123.133551199877, 129.77968190439, 
131.592809556744, 105.65885827936, 127.764417152375, 117.245050088647, 
93.1719822290131, 68.1660663755487, 92.5545536165007, 94.9115428627589, 
105.788235345741, 73.0813936716734, 79.4491344296678, 106.324239572238
), VIC_imports = c(119.881326993228, 72.8019934446876, 90.9624390421695, 
90.6741778005324, 102.747232274965, 83.5356065085151, 54.5016137499819, 
78.1280533672743, 93.2734312861034, 109.473020106515, 90.0578086398267, 
86.6500053937645, 95.7025739373388, 127.568023982024, 95.7034006075364, 
112.344214458473, 86.9642142831438, 94.3372064176442, 130.222732770178, 
134.409452316505, 155.428968860875, 68.0096840143325, 105.890437610919, 
99.6203206860303, 75.2824869603338, 115.735837280929, 86.3729131636829, 
82.9310390614736, 124.091276000132, 78.3771699207085, 103.922346278543, 
83.46751946436, 119.657072906062, 130.545421950807, 85.3419505676208, 
66.6837340290944, 107.143966960819), QLD_imports = c(117.014753210344, 
125.076285998082, 108.075751424447, 116.149841712693, 87.9637184983449, 
110.875027675137, 82.5321193987835, 104.199571043689, 143.935477400118, 
111.264962389829, 156.468289209552, 121.003664155774, 72.3963435087795, 
62.5810957709165, 93.1572596821912, 96.201419894079, 108.208394187603, 
143.120402834117, 100.482336218757, 90.3699496924852, 119.842190985584, 
76.5136022404434, 113.867026350874, 73.763983941927, 97.4476075534353, 
83.264825032814, 111.058877792351, 117.424727536356, 94.2986966725824, 
69.2682633255994, 116.064867828189, 89.6551681568459, 107.372700010825, 
109.739805909577, 95.088706897123, 120.201880826983, 77.6895274838571
), SA_imports = c(110.010396485493, 101.869312280892, 91.998689130028, 
90.8463801567309, 80.1179573441872, 88.6724229453134, 125.810896296793, 
99.5894916215236, 119.475709722616, 105.436655228732, 125.077041233627, 
98.6177461822122, 89.6002326761649, 106.963270889154, 50.5392680509276, 
103.113838135707, 91.5141782443978, 86.580578610622, 118.648114313074, 
82.1558631960156, 96.91564332334, 125.148092576124, 79.6646897704971, 
70.5719567581015, 90.9840854434736, 83.080486556085, 121.529762813096, 
128.865932405163, 114.773952876205, 135.732702020471, 97.3183699178946, 
136.232604828972, 77.2963919179093, 128.252357680553, 93.634663994594, 
76.3901446220594, 78.0454483875065), NSW_exports_minus_imports = c(-4.98154320964957, 
-6.40870619982411, 15.4817995384314, -18.2811627460366, 6.25194121223295, 
16.5574201888702, 1.54176292536786, 18.2063931989067, 3.25809578061754, 
-45.2803547435839, 5.03283737093038, -23.5438284495765, -16.6842808874263, 
-9.81068297950101, 30.2212425379563, -3.89245184924297, 3.54414296045336, 
-5.757079686677, -25.0298824502939, -49.0183012987607, 57.7697913641212, 
22.0438717204524, -5.2188149371474, -27.5477979235577, -30.8501898145076, 
-59.2475855265455, 24.4876025020478, -42.0346554358757, -43.5754262867079, 
-0.142653281040893, 55.3516725622082, 7.99565403187549, -9.92862248872092, 
-10.2018006055575, 26.1880851520102, 29.3947168599037, -30.5658606456568
), VIC_exports_minus_imports = c(-24.4463125832964, 43.6614780531758, 
56.2883800634793, 5.15175133650378, 17.6514274195122, 7.37871301762185, 
94.1108454418743, 21.6337203735087, -7.24511035391362, 9.03676050462592, 
19.4935067927731, 0.431070639177676, -3.79696699691343, -29.7805080681956, 
8.98388916451981, 8.74091121438806, 13.5850536576081, 19.439987187673, 
-15.3189991163053, -39.7853995123509, -72.5121473321345, 54.4157306811096, 
22.7797351726226, -3.9981897735659, 57.8954857168106, -8.20407053207681, 
25.6056785317997, 3.46099134939162, -56.8998831251728, 8.4381935062207, 
-0.491185429395642, 4.01515279688221, -15.8356344267566, -82.6602461486637, 
-1.75404395148259, 13.1021566449902, -21.0826083517268), QLD_exports_minus_imports = c(-2.62905332862606, 
-12.0726452584521, -8.58089922340295, -34.0739456183833, 50.3379194160844, 
-14.9052081257977, -3.21824709775461, 5.79928197528719, -45.6252166802503, 
-19.041719627117, -51.3475034015964, -36.9467103623786, 48.2507894434974, 
63.5992023446301, 0.665207937588477, -14.7985097249204, 2.79081077114631, 
-30.0449797974074, -1.81306011241412, -23.1093988482519, 9.26290692360013, 
21.0251287575643, 12.1784627017139, -24.2431006893812, 31.5462125463232, 
3.00002021499766, 24.4898436647479, -19.376350745422, -10.9155010987483, 
28.3600745565746, -31.697283922857, -18.6398287353584, -24.5732563698712, 
2.14488622279487, 15.517329093331, -10.486859937228, 5.54325781288976
), SA_exports_minus_imports = c(-15.8997702473033, -0.777384688251971, 
27.8644656708815, 6.46861977452016, 41.4829525216378, 14.041334771732, 
-3.43115902592565, 2.12035714591305, -46.1745496232491, -16.9981429733934, 
-45.1942814748697, 2.01608203183162, -8.04674212651172, -2.16325175946851, 
54.5035679571979, 7.69255405539084, 34.7369377960848, -1.56681800691962, 
4.61386636352184, 27.7392358585243, 11.6950345537377, -37.1521755994476, 
42.1814418651879, 64.3440768805314, 48.6569169129262, -25.1552612008493, 
26.738919389348, -40.7197358361375, -43.2675923298422, -52.1896803612086, 
21.6403462935682, -19.0608931220331, 11.3474069945817, -6.54860629758304, 
45.7239982932029, 33.4013336897184, 42.7440374507478)), row.names = c(NA, 
-37L), class = c("tbl_df", "tbl", "data.frame"))

```

## Basic Usage

From the [docs](https://dplyr.tidyverse.org/articles/colwise.html):

`across` has two primary arguments:

*    The first argument, `.cols`, selects the columns you want to operate on. 
     It uses tidy selection (like `select`) so you can pick variables by 
     position, name, and type.
    
*    The second argument, `.fns`, is a function or list of functions to apply to
     each column.
     
You will usually use `across` inside of `mutate` or `summarise`. Let's see this
in action with the `mtcars` data set that comes built into R:

```{r, echo = FALSE}
df <- as_tibble(mtcars)
rownames(df) <- NULL
print(df, n = 6)
```

**Example 1: Get the mean of all columns ([what is |> ?](link-to-RTOW))**:

```{r, eval = FALSE}
df |>
  summarise(across(everything(), mean))
```
```{r, echo = FALSE}
print(example_1, n = 5)
```

**Example 2: Normalise all columns to mean 0 and standard deviation 1**:

```{r, eval = FALSE}
df |>
  mutate(across(everything(), ~ (.x - mean(.x))/sd(.x)))
```
```{r, echo = FALSE}
print(example_2, n = 5)
```

If you haven't seen `~ .x` before, this is just shorthand for 
`function(.x) .x`. For more information, see e.g. 
[Where is the Purrr ~ operator documented?](https://stackoverflow.com/q/67643144).

**Example 3: Normalise just a few columns, leaving the rest as they are**:

```{r, eval = FALSE}
df |>
  mutate(across(c(mpg, cyl, hp), ~ (.x - mean(.x))/sd(.x)))
```
```{r, echo = FALSE}
print(example_3, n = 5)
```

**Example 4: Add the `mpg` column to all the others**:

```{r, eval = FALSE}
df |>
  mutate(across(!mpg, ~ .x + mpg))
```
```{r, echo = FALSE}
print(example_4, n = 5)
```

**Example 5: Recode values in certain columns**:

```{r, eval = FALSE}
# For the columns that begin with "d",
# recode values below the mean as LOW and above the mean as HIGH
df |>
  mutate(across(starts_with("d"), ~ ifelse(.x < mean(.x), "LOW", "HIGH")))
```
```{r, echo = FALSE}
print(example_5, n = 5)
```

**Example 6: Combine `group_by` with `across`**:

```{r, eval = FALSE}
# Select mpg, cyl and hp;
# group by cyl (either 4, 6, or 8);
# summarise with the median value of mpg and hp,
# and include the sample size of each group

df |>
  select(mpg, cyl, hp) |>
  group_by(cyl) |>
  summarise(across(everything(), median), n = n())
```

```{r, echo = FALSE}
structure(list(cyl = c(4, 6, 8), mpg = c(26, 19.7, 15.2), hp = c(91, 
110, 192.5), n = c(11L, 7L, 14L)), class = c("tbl_df", "tbl", 
"data.frame"), row.names = c(NA, -3L))
```

This example also demonstrates that using `across` doesn't lock you out of
using the same `summarise` or `mutate` for other things at the same type.
It is just convenient tool for applying a function over several columns!

All of this simple functionality alone is very powerful, but in the next
section I'm going to give some examples of the slightly more
advanced functionality available with `across`, which can can be used to
simplify big pieces of code, making it more resilient and predictable. 
The code is presented largely without comment but should hopefully be 
useful as a starting point if you come `across` similar problems.

## Advanced Examples

In this section I'll use some fake data called `trade_data`:
```{r, echo = FALSE}
print(trade_data_1, n = 5)
```

**Example 7: Make new columns with an anonymous function**:

```{r, eval = FALSE}
# Add a growth column for each existing column
trade_data |>
  mutate(
    across(where(is.numeric),          # select the numeric columns
           ~ 100 * (.x / lag(.x) - 1), # calcuate their growth vector
           .names = "{.col}_growth")   # name the new columns
    ) |>
  select(ends_with("_growth"))         # just so that we can see them
```
```{r, echo = FALSE}
print(example_6, n = 5)
```

Notice how the new argument `.names` takes a
[*glue specification*](https://glue.tidyverse.org/) to automatically generate
very nice column names. In this case, `across` understands that `{.col}`
stands for the 'current' column name.

**Example 8: Make new columns with a named function**:

```{r, eval = FALSE}
# Calculate the contributions of NSW and VIC exports to
# monthly growth in total 'AUS_exports', which for the sake
# of demonstration is just NSW + VIC.

# Define a function to calculate contributions to growth

c2growth <- function(component, aggregate, periods = 1) {
  100 * (component - lag(component, n = periods)) / lag(aggregate)
}

# Create the fake 'AUS_exports' column
trade_data <- trade_data |>
  mutate(AUS_exports = NSW_exports + VIC_exports)

# Calculate the contributions to growth
trade_data |>
  
  # Calculate total growth in AUS_exports
  mutate(AUS_growth = 100 * (AUS_exports/lag(AUS_exports) - 1)) |>

  # Calculate the contributions to growth per state with across
  mutate(across(ends_with("_exports"),
                ~ c2growth(.x, AUS_exports, 1),
                .names = "{.col}_c2growth"))
```

There are too many columns to display neatly, but here is the structure of the
resulting tibble:

```{r, echo = FALSE}
glimpse(example_7)
```

We can verify that the first few contributions to growth add up to the
total growth in `AUS_exports` (e.g. `-10.17 + 7.09 = -3.07`).

**Example 9: Make multiple new columns per existing column**:

```{r, eval = FALSE}
# Calculate the growth and cumulative minimum columns per each existing column
trade_data |>
  mutate(across(
    where(is.numeric),
    list(
      growth = ~ 100 * (.x / lag(.x) - 1),
      cummin = ~ cummin(.x)
    ),
    .names = "{.col}_{.fn}"
  ))
```

There are too many columns to display neatly, but here is the structure of the
resulting tibble:

```{r, echo = FALSE}
glimpse(example_8)
```

Notice how `{.col}` and `{.fn}` work together in `.names` to automatically
build very nice column names. Here, `across` understands that `{.fn}` stands
for the name of the 'current' function.

Note that if you just wanted these new columns, you can just replace mutate
with `reframe` (RTOW forthcoming):

```{r, eval = FALSE}
# Calculate the growth and cumulative minimum columns per each existing column
trade_data |>
  reframe(across(
    where(is.numeric),
    list(
      growth = ~ 100 * (.x / lag(.x) - 1),
      cummin = ~ cummin(.x)
    ),
    .names = "{.col}_{.fn}"
  ))
```

```{r, echo = FALSE}
example_8_reframe
```

**Example 10: Use `across` on groups of related columns**:

When working with wide data, we often have columns that relate to each other
which we would like to use together in functions. For example, you may want to
calculate a net exports column for each state/territory from the difference
of their `exports` and `imports` columns. Let's do this with `across` below.

I'm going to add a few more columns to our fake data `trade_data`:

```{r, echo = FALSE}
print(trade_data_2, n = 5)
```

Let's compute `exports_minus_imports` using across:

```{r, eval = FALSE}
trade_data |>
  mutate(across(ends_with("_exports"),
  ~ .x - get(paste0(str_extract(cur_column(), "^[:upper:]{2,3}"), "_imports")),
                .names = "{.col}_minus_imports"))
```

There are too many columns to display neatly, but here is the structure of the
resulting tibble:

```{r, echo = FALSE}
glimpse(example_9)
```

I think this is much more manageable than the more 'manual' approach below, 
which works for small numbers of columns, but is unpractical if you have any 
more than a few columns to create:

```{r, eval = FALSE}
trade_data |>
  mutate(
    NSW_exports_minus_imports = NSW_exports - NSW_imports,
    VIC_exports_minus_imports = VIC_exports - VIC_imports,
    QLD_exports_minus_imports = QLD_exports - QLD_imports,
    SA_exports_minus_imports = SA_exports - SA_imports
  )
```

This solution with `across` is good but it could be more elegant. If you
are happy to play around a little with `purrr`, it can make your code a
bit more readable, using `map2` instead of `across`:

```{r, eval = FALSE}
trade_data |>
  mutate(
    map2(
      eval(pick(ends_with("exports")), env = parent.frame()),
      eval(pick(ends_with("imports")), env = parent.frame()),
      ~ .x - .y) |>
      bind_cols() |>
      rename_with(~ str_c(.x, "_minus_imports"))
    )
```

This is better, but it's still a bit ugly and uses `eval` which shouldn't
really be necessary. A little trickery with the original `magrittr` pipe
can improve the readability further:

```{r, eval = FALSE}
trade_data %>%
  mutate(
    map2(
      select(., ends_with("exports")), 
      select(., ends_with("imports")),
      ~ .x - .y) |>
      bind_cols() |>
      rename_with(~ str_c(.x, "_minus_imports"))
  )
```

I've also seen solutions on 
[Stack Overflow](https://stackoverflow.com/questions/72500806) 
that prefer to use `split.default`. However, I think this is a little
clunky and don't really like the use of `bind_cols`, but it is still
an interesting example of the use of `imap`.

```{r, eval = FALSE}
trade_data %>%
  
  # split up based on states
  split.default(str_extract(names(.), "^[:upper:]{2,3}"), drop = TRUE) %>%
  
  # exports minus imports
  imap(~ .x[[str_c(.y, "_exports")]] - .x[[str_c(.y, "_imports")]]) %>%
  
  # bind columns 
  bind_cols() %>%
  
  # rename columns
  rename_with(~ str_c(.x, "_exports_minus_imports")) %>%
  
  # bind onto original data
  bind_cols(trade_data, .)
```

The best option I know about is the `dplyover` package, which
implements the extremely elegant `across2`:

```{r, eval = FALSE}
library(dplyover)

trade_data |>
  mutate(
    across2(ends_with("exports"), ends_with("imports"),
            ~ .x - .y,
            .names = "{xcol}_minus_{ycol}")
    )
```
```{r, echo = FALSE}
glimpse(example_dplyover)
```

At the time of writing, `dplyover` is not on CRAN. If you are happy to use
a non-CRAN package, you can find `dplyover` 
[here](https://timteafan.github.io/dplyover/index.html), and install it with
the `remotes` package.

## Infrastructure

Working with wide data isn't always the easiest or most efficient, but with
`across` it can be very convenient and safe to do. 

That said, I wouldn't use the first `across` solution for Example 9 in an
*'infrastructure'* script. It has a lot of technical mess right there
inside of the mutate, which is distracting for a reader only interested
in the data. Instead, to deploy this in some infrastructure
I would establish a few functions to handle that mess first, and then
use those to make the code more readable. That is, first define a function
somewhere earlier like:

```{r, eval = FALSE}
extract_state <- function(string) {
  str_extract(string, "^[:upper:]{2,3}")
}
```

to handle the variable manipulation, and another like:

```{r, eval = FALSE}
get_state_var <- function(state_string, variable_string) {
  get(paste0(state_string, variable_string), envir = parent.frame())
}
```

to handle the `get` part (the relatively new `dplyr` function `pick` is
supposed to serve this purpose but doesn't seem to work here reliably yet).

With these functions established, you could have the following in the 
analysis part of the infrastructure:

```{r, eval = FALSE}
trade_data |>
  mutate(
    across(
    
    # across the export columns
    ends_with("_exports"),
    
    # subtract imports
    ~ .x - get_state_var(extract_state(cur_column()), "_imports"),
    
    # name new columns exports_minus_imports
    .names = "{.col}_minus_imports"
    
  )
)
```
```{r, echo = FALSE}
glimpse(example_9)
```

This kind of set up would also generalise easily
to other potential columns (e.g. `NSW_income`), whereas the manual way
demands yet more typing and opportunities for mistakes.
